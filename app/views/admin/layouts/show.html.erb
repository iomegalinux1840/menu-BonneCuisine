<div class="admin-content">
  <div class="admin-header">
    <h2>Personnalisation de la mise en page</h2>
  </div>

  <p class="text-muted">
    Ajustez l'apparence de votre page de menu pour qu'elle reflète l'identité de votre restaurant.
  </p>

  <%= form_with model: @restaurant,
                url: restaurant_admin_layout_path(restaurant_slug: @restaurant.slug),
                method: :patch,
                local: true,
                class: "admin-form" do |form| %>
    <div class="form-grid">
      <% image_size_options = Restaurant::MENU_IMAGE_SIZES.map do |size|
           label = size == 'small' ? 'Image petite' : 'Image large'
           [label, size]
         end %>
      <% column_options = Restaurant::MENU_GRID_COLUMN_RANGE.map do |value|
           ["Grille #{value} colonnes", value]
         end %>
      <% font_size_options = Restaurant::MENU_FONT_SIZES.map do |value|
           label =
             case value
             when 'small' then 'Petite'
             when 'large' then 'Grande'
             else 'Normale'
             end
           ["Police #{label}", value]
         end %>
      <% style_options = Restaurant::MENU_DISPLAY_STYLES.map do |style|
           label = style == 'showcase' ? 'Style vitrine moderne' : 'Style liste classique'
           description = style == 'showcase' ? "Grandes vignettes circulaires et bandeau latéral — idéal pour les écrans TV." : "Disposition compacte en colonnes — idéale pour afficher de nombreux plats sur une page."
           { value: style, label: label, description: description }
         end %>

      <div class="form-group full-width">
        <%= form.label :menu_display_style, "Style d'affichage", class: "form-label" %>
        <div class="radio-group stacked">
          <% style_options.each do |option| %>
            <label class="radio-option">
              <%= form.radio_button :menu_display_style, option[:value] %>
              <div>
                <strong><%= option[:label] %></strong>
                <p><%= option[:description] %></p>
              </div>
            </label>
          <% end %>
        </div>
        <small class="form-help">Choisissez la présentation générale de votre menu public.</small>
      </div>

      <div class="form-group">
        <%= form.label :menu_image_size, "Taille des images", class: "form-label" %>
        <%= form.select :menu_image_size, options_for_select(image_size_options, @restaurant.menu_image_size),
                        {}, class: "form-input" %>
        <small class="form-help">Détermine la hauteur des photos affichées dans le menu public.</small>
      </div>

      <div class="form-group">
        <%= form.label :menu_grid_columns, "Nombre de colonnes", class: "form-label" %>
        <%= form.select :menu_grid_columns, options_for_select(column_options, @restaurant.menu_grid_columns),
                        {}, class: "form-input" %>
        <small class="form-help">Choisissez comment les cartes de plats sont organisées. Le site reste responsive sur mobile.</small>
      </div>

      <div class="form-group">
        <%= form.label :menu_font_size, "Taille de la police", class: "form-label" %>
        <%= form.select :menu_font_size, options_for_select(font_size_options, @restaurant.menu_font_size),
                        {}, class: "form-input" %>
        <small class="form-help">Ajuste la taille du texte dans la grille des plats (noms et descriptions).</small>
      </div>

      <div class="form-group">
        <%= form.label :menu_font_color, "Couleur du texte", class: "form-label" %>
        <%= form.color_field :menu_font_color, class: "form-input" %>
        <small class="form-help">Couleur utilisée pour les titres et descriptions des plats.</small>
      </div>

      <div class="form-group">
        <%= form.label :menu_accent_color, "Couleur d'accent", class: "form-label" %>
        <%= form.color_field :menu_accent_color, class: "form-input" %>
        <small class="form-help">Utilisée pour les prix et les éléments mis en évidence.</small>
      </div>

      <div class="form-group">
        <%= form.label :menu_background_color, "Couleur d'arrière-plan", class: "form-label" %>
        <%= form.color_field :menu_background_color, class: "form-input" %>
        <small class="form-help">Définit le fond de la page du menu.</small>
      </div>

      <div class="form-group full-width">
        <%= form.label :message_of_the_day, "Message du jour", class: "form-label" %>
        <%= form.text_area :message_of_the_day, rows: 3, class: "form-textarea",
                           placeholder: "Promotion, événement spécial ou note importante pour vos clients" %>
        <small class="form-help">Ce message sera affiché en haut de votre page de menu publique.</small>
      </div>
    </div>

    <div class="form-actions">
      <%= form.submit "Enregistrer les changements", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
