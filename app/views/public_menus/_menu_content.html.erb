<% if menu_layout[:message_of_the_day].present? %>
  <section class="menu-message" role="complementary">
    <div class="menu-message-body"><%= simple_format(menu_layout[:message_of_the_day]) %></div>
  </section>
<% end %>

<% if ENV['STRIPE_PRICING_TABLE_ID'].present? && ENV['STRIPE_PUBLISHABLE_KEY'].present? %>
  <section class="subscription-pricing-table">
    <stripe-pricing-table
      pricing-table-id="<%= ENV['STRIPE_PRICING_TABLE_ID'] %>"
      publishable-key="<%= ENV['STRIPE_PUBLISHABLE_KEY'] %>">
    </stripe-pricing-table>
  </section>
<% elsif ENV['STRIPE_PUBLISHABLE_KEY'].present? && (current_restaurant.stripe_price_id.present? || ENV['STRIPE_PRICE_ID'].present?) %>
  <section class="subscription-cta"
           data-controller="subscription"
           data-subscription-url-value="<%= restaurant_subscriptions_path(restaurant_slug: current_restaurant.slug) %>">
    <div class="subscription-cta__copy">
      <h2>Restez informé</h2>
      <p>Abonnez-vous pour recevoir les nouveautés du menu.</p>
    </div>
    <button type="button"
            class="subscription-cta__button"
            data-action="click->subscription#subscribe"
            data-subscription-target="button">
      S'abonner
    </button>
    <p class="subscription-cta__error" data-subscription-target="error" hidden></p>
  </section>
<% end %>

<section class="menu-section" aria-labelledby="menu-title">
  <h2 id="menu-title" class="menu-title">
    <%= current_restaurant.name.presence || 'Notre carte' %>
  </h2>

  <div class="menu-grid image-<%= menu_layout[:image_size] %>"
       id="menu-grid"
       data-columns="<%= menu_layout[:grid_columns] %>">
    <%= render partial: "menu_items/menu_item",
               collection: menu_items,
               as: :menu_item,
               locals: { layout_settings: menu_layout } %>
  </div>

  <% if menu_items.empty? %>
    <div class="empty-menu">
      <p>Aucun plat disponible pour le moment.</p>
    </div>
  <% end %>
</section>
